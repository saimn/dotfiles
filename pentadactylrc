"-----------------------------------------
" ~/.pentadactylc - Pentadactyl config file
"-----------------------------------------

" Load plugins
loadplugins

" Load userstyles
source ~/.pentadactyl/styles/styles.js
styledisable -name global

colorscheme zenburn

set editor="emacsclient -c"

" default search engine
set defsearch="duck"

" don't show tab line if only one tab
set showtabline=multitab

set visualbell

" open all commands in a new tab
set newtab=all
" set showstatuslinks=2

set wildmode=list:longest,list:full
"set wildoptions=auto

" Unfocus textfields
set strictfocus

" Vim editing in textareas
"set noinsertmode

" buftabs option
"let g:buftabs_showCurrentUrl = 1
" Show/hide the buftabbar
"nmap <silent> <A-u> :set invbuftabs<CR>

" RSS icon in statusbar
" javascript <<EOF
" (function(){
"    var feedPanel = document.createElement("statusbarpanel");
"    feedPanel.setAttribute("id", "feed-panel-clone");
"    feedPanel.appendChild(document.getElementById("feed-button"));
"    feedPanel.firstChild.setAttribute("style", "padding: 0; max-height: 16px;");
"    document.getElementById("status-bar")
"            .insertBefore(feedPanel, document.getElementById("security-button"));
" })();
" EOF

" {{{ Quickmarks / Bookmarks
" Quickmarks
delqm!
source ~/.pentadactyl/qmarks

" Bookmarks
"source ~/.pentadactyl/bookmarks
" }}}

" Commands {{{

command! -description 'duck ssl'       -nargs=* d     tabopen https://duckduckgo.com/?q=<args>&v=
command! -description 'google ssl'     -nargs=* g     tabopen https://encrypted.google.com/search?q=<args>
command! -description 'scroogle ssl'   -nargs=* s     tabopen https://ssl.scroogle.org/cgi-bin/nbbwssl.cgi?Gw=<args>

command! -description python.org       -nargs=0 py    tabopen http://python.org
command! -description 'python doc'     -nargs=1 pydoc tabopen http://docs.python.org/<args>
command! -description 'python library' -nargs=1 pylib tabopen http://docs.python.org/library/<args>.html
command! -description 'search pypi'    -nargs=* pypi  tabopen http://pypi.python.org/pypi?%3Aaction=search&term=<args>&submit=search

command! -nargs=1 wpf   tabopen http://fr.wikipedia.org/wiki/<args>
command! -nargs=* wpfs  tabopen http://fr.wikipedia.org/wiki/Special:Search?search=<args>&go=Go&fulltext=search
command! -nargs=1 wpe   tabopen http://en.wikipedia.org/wiki/<args>
command! -nargs=* wpes  tabopen http://en.wikipedia.org/wiki/Special:Search?search=<args>&go=Go&fulltext=search
command! -nargs=* dict  tabopen http://fr.wiktionary.org/wiki/<args>

command! -description 'emacs wiki'      -nargs=* emacs tabopen http://www.google.com/cse?cx=004774160799092323420%3A6-ff2s0o6yi&q=<args>&sa=Search
command! -description 'translate en2fr' -nargs=* wr2fr tabopen http://www.wordreference.com/enfr/<args>
command! -description 'translate fr2en' -nargs=* wr2en tabopen http://www.wordreference.com/fren/<args>

":autocmd LocationChange mail\.google\.com js modes.passAllKeys = true
":autocmd LocationChange google(\.(com|fr)\/(reader|calendar)) js modes.passAllKeys = true
:autocmd LocationChange .* -js modes.reset()
:autocmd LocationChange ssl3\.ovh\.net\/~climbr\/tt-rss -js modes.set(modes.PASS_THROUGH)

" Set the Vim filetype to "mail" when editing mail in GMail with the external editor:
":autocmd LocationChange .* :set editor=gvim\ -f
":autocmd LocationChange mail\.google\.com :set editor="gvim -f -c 'set ft=mail'"

"Pour « [[ » et « ]] » permet de les faire fonctionner en Français
set nextpattern=\bnext|Next|suivant|Suivant\b,^>$,^(>>|»)$,^(>|»),(>|»)$,\bmore\b
set previouspattern=\bprev|previous|Previous|précédent|Précédent\b,^<$,^(<<|«)$,^(<|«),(<|«)$

" }}}

" Keys {{{

set mapleader=","

map <leader>n -silent :bnext<CR>
map <leader>p -silent :bprev<CR>
map <C-right> -silent :bnext<CR>
map <C-left> -silent :bprev<CR>

" Show/hide toolbars
map <F9> :set go+=mT<CR>
map <F10> :set go-=mT<CR>

" contrast plugin
map <C-j> :contrast 10<CR>
map <C-k> :contrast -10<CR>

" restart pentadactyl
map <C-r> :restart<CR>

map <A-a> :dialog addbookmark<CR>
map <A-b> :dialog bookmarks<CR>

" Toggle userstyles/userscripts
nmap <Leader>s -silent :styletoggle!<CR>:styledisable -name global<CR>
nmap <Leader>h -silent :styletoggle -name global<CR>
nmap <Leader>S -silent :loaduserstyles<CR>:styledisable -name global<CR>

" }}}

" Firefox options {{{

set! browser.tabs.closeWindowWithLastTab=false
" hide close button
set! browser.tabs.closeButtons=3
" open bookmarks in background
"set! browser.tabs.loadBookmarksInBackground=true
" open tabs by javascript in background
"set! browser.tabs.loadDivertedInBackground=true
" allow control sidebar position
"set! layout.scrollbar.side=1

" }}}

" Hints {{{

"js <<EOF
"hints.addMode("i", "Focus to input",
"    function(element) element.focus(),
"    function() "//input[not(@type='hidden')] | //textarea | //xhtml:input[not(@type='hidden')] | //xhtml:textarea"
"    );

"hints.addMode("h", "Hide element",
"    function(element) {
"        element.style.display = "none";
"    },
"    function() "//*");
"EOF

" }}}

" vim:ft=vimperator:
