"-----------------------------------------
" ~/.pentadactylc - Pentadactyl config file
"-----------------------------------------

" Load plugins
loadplugins

" Load userstyles
source ~/.pentadactyl/styles/styles.js
styledisable -name global

colorscheme molokai

set editor="gvim -f"

" default search engine
set defsearch="duck"

set visualbell

" open all commands in a new tab
set newtab=all
" set showstatuslinks=2
" set showtabline=multitab

set wildmode=list:longest,list:full
"set wildoptions=auto

" Unfocus textfields
set strictfocus

set hlfind

" Vim editing in textareas
"set noinsertmode

" buftabs option
"let g:buftabs_showCurrentUrl = 1
" Show/hide the buftabbar
"nmap <silent> <A-u> :set invbuftabs<CR>

" RSS icon in statusbar
" javascript <<EOF
" (function(){
"    var feedPanel = document.createElement("statusbarpanel");
"    feedPanel.setAttribute("id", "feed-panel-clone");
"    feedPanel.appendChild(document.getElementById("feed-button"));
"    feedPanel.firstChild.setAttribute("style", "padding: 0; max-height: 16px;");
"    document.getElementById("status-bar")
"            .insertBefore(feedPanel, document.getElementById("security-button"));
" })();
" EOF

" {{{ Quickmarks / Bookmarks
" Quickmarks
delqm!
source ~/.pentadactyl/qmarks

" Bookmarks
"source ~/.pentadactyl/bookmarks
" }}}

" Commands {{{

command! -description 'duck ssl'     -nargs=* d     tabopen https://duckduckgo.com/?q=<args>&v=
command! -description 'google ssl'   -nargs=* g     tabopen https://encrypted.google.com/search?q=<args>
command! -description 'scroogle ssl' -nargs=* s     tabopen https://ssl.scroogle.org/cgi-bin/nbbwssl.cgi?Gw=<args>

command! -description 'python.org' -nargs=1 py    tabopen http://www.google.com/search?domains=www.python.org&sitesearch=www.python.org&q=<args>
command! -description 'python doc' -nargs=1 pydoc tabopen http://docs.python.org/search.html?q=<args>
command! -description 'pypi'       -nargs=* pypi  tabopen http://pypi.python.org/pypi?%3Aaction=search&term=<args>&submit=search

command! -nargs=1 wpf   tabopen http://fr.wikipedia.org/wiki/<args>
command! -nargs=* wpfs  tabopen http://fr.wikipedia.org/wiki/Special:Search?search=<args>&go=Go&fulltext=search
command! -nargs=1 wpe   tabopen http://en.wikipedia.org/wiki/<args>
command! -nargs=* wpes  tabopen http://en.wikipedia.org/wiki/Special:Search?search=<args>&go=Go&fulltext=search
command! -nargs=* dict  tabopen http://fr.wiktionary.org/wiki/<args>

command! -description 'emacs wiki'  -nargs=* emacs tabopen http://www.google.com/cse?cx=004774160799092323420:6-ff2s0o6yi&q=<args>&sa=Search&nojs=1
command! -description 'trans en2fr' -nargs=* wr2fr tabopen http://www.wordreference.com/enfr/<args>
command! -description 'trans fr2en' -nargs=* wr2en tabopen http://www.wordreference.com/fren/<args>

":autocmd LocationChange .* -js modes.reset()
":autocmd LocationChange webmail\.gandi\.net -js modes.set(modes.PASS_THROUGH)
":autocmd LocationChange mail\.google\.com -js modes.set(modes.PASS_THROUGH)
":autocmd LocationChange google(\.(com|fr)\/(reader|calendar)) js modes.passAllKeys = true
set passkeys+=mail.google.com:jk<CR>

" Set the Vim filetype to "mail" when editing mail in GMail with the external editor:
":autocmd LocationChange .* :set editor=gvim\ -f
":autocmd LocationChange mail\.google\.com :set editor="gvim -f -c 'set ft=mail'"

"Pour « [[ » et « ]] » permet de les faire fonctionner en Français
set nextpattern=\bnext|Next|suivant|Suivant\b,^>$,^(>>|»)$,^(>|»),(>|»)$,\bmore\b
set previouspattern=\bprev|previous|Previous|précédent|Précédent\b,^<$,^(<<|«)$,^(<|«),(<|«)$

" }}}

" Keys {{{

map , <Leader>

map <leader>n -silent :bnext<CR>
map <leader>p -silent :bprev<CR>
map <C-right> -silent :bnext<CR>
map <C-left> -silent :bprev<CR>

map <leader>t -silent :tabopen about:newtab<CR>

" Show/hide toolbars
map <F9> :set go+=mT<CR>
map <F10> :set go-=mT<CR>

" contrast plugin
map <C-j> :contrast 10<CR>
map <C-k> :contrast -10<CR>

" restart pentadactyl
map <C-r> :restart<CR>

map <C-b> <C-v><C-b>
map <A-a> :dialog addbookmark<CR>
" map <A-b> :dialog bookmarks<CR>

" Toggle userstyles/userscripts
nmap <silent> ,s :styletoggle!<CR>:styledisable -name global<CR>
nmap <silent> ,h :styletoggle -name global<CR>
nmap <silent> ,S :loaduserstyles<CR>:styledisable -name global<CR>
nmap <silent> ,g :gmset!<CR>

map -modes=n,v <C-F6> y:!~/bin/supergenpass<Space>'<S-Insert>'<Return><Esc>2gi<S-Insert><Return>
map -modes=i <C-F6> <Esc><C-F6>

" Faster scrolling
"map -builtin <C-e> 3<C-e>
"map -builtin <C-y> 3<C-y>
"nmap <BS> <Space>
"nmap <S-BS> <S-Space>

map -builtin h 5h
map -builtin j 5j
map -builtin k 5k
map -builtin l 5l

map -builtin J 2j
map -builtin K 2k

"map -builtin s f
"map -builtin S F
"map -builtin e d
"map -builtin ;s g;b
"map -builtin ;t ;y
"map -builtin ;n ;i
"map -builtin ;N ;I

"nmap <Down> r
"nmap <Left> v
"nmap <Right> w
"nmap <Up> d

" Video control keys
nmap <silent> <leader>p :stplay<CR>
nmap <silent> <leader>P :stpause<CR>
nmap <silent> <leader>l :stlarge<CR>
nmap <silent> <leader>m :stmute<CR>

" }}}

" Firefox options {{{

" set! browser.tabs.closeWindowWithLastTab=false
" hide close button
" set! browser.tabs.closeButtons=3
" open bookmarks in background
"set! browser.tabs.loadBookmarksInBackground=true
" open tabs by javascript in background
"set! browser.tabs.loadDivertedInBackground=true
" allow control sidebar position
"set! layout.scrollbar.side=1

" }}}

" Hints {{{

"js <<EOF
"hints.addMode("i", "Focus to input",
"    function(element) element.focus(),
"    function() "//input[not(@type='hidden')] | //textarea | //xhtml:input[not(@type='hidden')] | //xhtml:textarea"
"    );

"hints.addMode("h", "Hide element",
"    function(element) {
"        element.style.display = "none";
"    },
"    function() "//*");
"EOF

" }}}

" vim:ft=vimperator:
